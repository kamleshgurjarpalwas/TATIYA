<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        justify-content: center;
        align-items: center;
      }
      .container {
        display: grid;
        grid-template-columns: repeat(1, 0fr);
      }
      .row {
        display: flex;
      }
      .horCor {
        width: 104px;
        height: 4px;
        background-color: aqua;
        border: 1px black solid;
        border-radius: 5px;
      }
      .horCor1 {
        width: 106px;
        height: 4px;
        background-color: aqua;
        border: 1px black solid;
        border-radius: 5px;
      }
      .verCor {
        width: 4px;
        height: 100px;
        background-color: aqua;
        border-top: 2px black solid;
        border-bottom: 2px black solid;
        border-radius: 5px;
      }
      .verCor1 {
        width: 4px;
        height: 100px;
        background-color: aqua;
        border-top: 2px black solid;
        border-bottom: 2px black solid;
        border-radius: 5px;
        border-left: 2px black solid;
      }
      .verCor2 {
        width: 4px;
        height: 100px;
        background-color: aqua;
        border-top: 2px black solid;
        border-bottom: 2px black solid;
        border-radius: 5px;
        border-right: 2px black solid;
      }
      .box {
        width: 100px;
        height: 100px;
        display: flex;
        background-color: bisque;
        border: 1px black solid;
        border-radius: 5px;
        justify-content: center;
        text-align: center;
        align-items: center;
        font-size: 50px;
        color: black;
      }

      .horCor:hover,
      .horCor1:hover {
        background-color: black;
        height: 6px;
      }
      .verCor:hover,
      .verCor1:hover,
      .verCor2:hover {
        background-color: black;
        width: 6px;
      }
    </style>
  </head>
  <body>
    <div class="container"></div>
    <script>
      const container = document.querySelector(".container");
      const num = 8;
      for (let i = 0; i < num * 2 + 1; i++) {
        const horBox = document.createElement("div");
        horBox.classList.add("row");
        if (i % 2 === 0) {
          for (let j = 0; j < num; j++) {
            const horBoxIn = document.createElement("div");
            if (j === 0 || j === num - 1) {
              horBoxIn.classList.add("horCor1", "partOfBoarder", "onlyHor");
            } else {
              horBoxIn.classList.add("horCor", "partOfBoarder", "onlyHor");
            }
            horBox.appendChild(horBoxIn);
          }
        } else {
          for (let j = 0; j < num * 2 + 1; j++) {
            if (j % 2 === 0) {
              const horBoxIn = document.createElement("div");
              if (j === 0) {
                horBoxIn.classList.add("verCor1", "partOfBoarder", "onlyVER");
              } else if (j === num * 2) {
                horBoxIn.classList.add("verCor2", "partOfBoarder", "onlyVER");
              } else {
                horBoxIn.classList.add("verCor", "partOfBoarder", "onlyVER");
              }
              horBox.appendChild(horBoxIn);
            } else {
              const horBoxIn = document.createElement("div");
              horBoxIn.classList.add("box");
              horBox.appendChild(horBoxIn);
            }
          }
        }
        horBox.classList.add("conatiner");
        container.appendChild(horBox);
      }

      //this code for backend
      
      let turn='K';
      const verBorder = document.querySelectorAll(".onlyVER");
      const horBorder = document.querySelectorAll(".onlyHor");
      const boxes = document.querySelectorAll(".box");
      verBorder.forEach((pob, index) => {
        pob.addEventListener("click", () => {
          pob.style.background = "black";
          pob.innerText = "r"; //i stored r for the clicked
          pob.checkVisibility = false;
          pob.disabled = true;
          console.log(turn);
          nameAllotmentForVer(index, turn);
          
        });
      });
      horBorder.forEach((pob, index) => {
        pob.addEventListener("click", () => {
          pob.style.background = "black";
          pob.innerText = "r"; //i stored r for the clicked
          pob.checkVisibility = false;
          pob.disabled = true;
          console.log(turn);
          nameAllotmentForHor(index, turn);
        });
      });
      //for the horizontal bars
      const nameAllotmentForHor = (index, player) => {

        let devide = Math.floor(index / num);
        if (index / num < 1) {
          if (
            verBorder[index + devide + 1].innerText === "r" &&
            verBorder[index + devide].innerText === "r" &&
            horBorder[index + num].innerText === "r"
          ) {
            boxes[index].innerText = player;
            turn=player;
            return;
          }
        } else if (index / num >= num) {
          console.log(index / num);
          if (
            verBorder[index + devide - num - 1].innerText === "r" && //yhe aur niche wali line thodi logical hai
            verBorder[index + devide - num].innerText === "r" && //yhe bhi logical hai
            horBorder[index - num].innerText === "r"
          ) {
            boxes[index - num].innerText = player;
            turn=player;
            return;
          }
        } else {
          let random = 0;
          if (
            verBorder[index + devide - num - 1].innerText === "r" &&
            verBorder[index + devide - num].innerText === "r" &&
            horBorder[index - num].innerText === "r"
          ) {
            boxes[index - num].innerText = player;
            random = 1;
          }
          if (
            verBorder[index + devide + 1].innerText === "r" &&
            verBorder[index + devide].innerText === "r" &&
            horBorder[index + num].innerText === "r"
          ) {
            boxes[index].innerText = player;
            random = 1;
          }
          if (random) {
            turn=player;
            return;
          }
        }
        if (player === 'K') turn='V';
        if (player === 'V') turn='K';
      };
      const nameAllotmentForVer = (index, player) => {
        let devide = Math.floor(index / (num + 1));
        if (index % (num + 1) === 0) {
          if (
            horBorder[index - devide].innerText != "" &&
            horBorder[index - devide + num].innerText != "" &&
            verBorder[index + 1].innerText != ""
          ) {
            boxes[index - devide].innerText = player;
            turn= player;
            return;
          }
        } else if (index % (num + 1) === 8) {
          if (
            horBorder[index - devide - 1].innerText != "" &&
            horBorder[index - devide + num - 1].innerText != "" &&
            verBorder[index - 1].innerText != ""
          ) {
            boxes[index - devide - 1].innerText = player;
            turn= player;
            return;
          }
        } else {
          let random1 = 0;
          if (
            horBorder[index - devide - 1].innerText != "" &&
            horBorder[index - devide + num - 1].innerText != "" &&
            verBorder[index - 1].innerText != ""
          ) {
            boxes[index - devide - 1].innerText = player;
            random1 = 1;
          }
          if (
            horBorder[index - devide].innerText != "" &&
            horBorder[index - devide + num].innerText != "" &&
            verBorder[index + 1].innerText != ""
          ) {
            boxes[index - devide].innerText = player;
            random1 = 1;
          }
          if (random1) {
            turn= player;
            return
          }
        }
        if (player === 'K') turn ='V';
        if (player === 'V') turn= 'K';
      };

    </script>
  </body>
</html>
